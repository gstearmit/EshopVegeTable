<?phpnamespace Main\Model;use Zend\Crypt\BlockCipher;use Zend\Db\TableGateway\TableGateway;use Zend\Session\Container; class ExTable {     protected $tableGateway;     public function __construct(TableGateway $tableGateway)     {         $this->tableGateway = $tableGateway;     }	 public function saveserver(Ex $ex)	{				$blockCipher = BlockCipher::factory('mcrypt', array('algo' => 'aes'));			$blockCipher->setKey('foxvsky');			$result = $blockCipher->encrypt($ex->passwd);			//echo "Encrypted text: $result \n";			//echo $blockCipher->decrypt($result);			            $data = array(			 'svname'			=> $ex->svname,             'user'       		=>$ex->user,            			 'passwd'      	=>$result,             'appid'   			=>$ex->appid,			 'appkey'				=>$ex->appkey,			 'root_folder'		=>$ex->root_folder,			 'root_folder_key'		=>$ex->root_folder_key,             'datecreat'    => date('Y-m-d H:i:s'),          );                $id = (int) $ex->id;        if ($id == 0){            $this->tableGateway->insert($data);			//var_dump();			return $this->tableGateway->lastInsertValue;         }else{            return 0;        }	}	public function getserver($id)	{		$rowset = $this->tableGateway->select(array('id' => $id));         $row = $rowset->current();         if (!$row) {             return false;         }		 else{		 	$blockCipher = BlockCipher::factory('mcrypt', array('algo' => 'aes'));			$blockCipher->setKey('foxvsky');			$row->passwd = $blockCipher->decrypt($row->passwd);         return $row;		 }	 	}		public function getactivesv()	{		$rowset = $this->tableGateway->select(array('status' => 1));		return $rowset;        	 	} } ?>